!function(e,t){"use strict";function n(e,t){for(var n,o=[],i=0;i<e.length;++i){if(n=l[e[i]]||r(e[i]),!n)throw"module definition dependecy not found: "+e[i];o.push(n)}t.apply(null,o)}function o(e,o,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(o===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(o,function(){l[e]=i.apply(null,arguments)})}function i(e){return!!l[e]}function r(t){for(var n=e,o=t.split(/[.\/]/),i=0;i<o.length;++i){if(!n[o[i]])return;n=n[o[i]]}return n}function a(n){for(var o=0;o<n.length;o++){for(var i=e,r=n[o],a=r.split(/[.\/]/),s=0;s<a.length-1;++s)i[a[s]]===t&&(i[a[s]]={}),i=i[a[s]];i[a[a.length-1]]=l[r]}}var l={},s="tinymce/tableplugin/TableGrid",c="tinymce/util/Tools",d="tinymce/Env",u="tinymce/tableplugin/Quirks",f="tinymce/util/VK",m="tinymce/tableplugin/CellSelection",p="tinymce/dom/TreeWalker",g="tinymce/tableplugin/Dialogs",b="tinymce/tableplugin/Plugin",h="tinymce/PluginManager";o(s,[c,d],function(e,n){function o(e,t){return parseInt(e.getAttribute(t)||1,10)}var i=e.each;return function(r,a){function l(){var e=0;M=[],D=0,i(["thead","tbody","tfoot"],function(t){var n=F.select("> "+t+" tr",a);i(n,function(n,r){r+=e,i(F.select("> td, > th",n),function(e,n){var i,a,l,s;if(M[r])for(;M[r][n];)n++;for(l=o(e,"rowspan"),s=o(e,"colspan"),a=r;r+l>a;a++)for(M[a]||(M[a]=[]),i=n;n+s>i;i++)M[a][i]={part:t,real:a==r&&i==n,elm:e,rowspan:l,colspan:s};D=Math.max(D,n+1)})}),e+=n.length})}function s(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function c(e,t){var n;return n=M[t],n?n[e]:void 0}function d(e,t,n){e&&(n=parseInt(n,10),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function u(e){return e&&(F.hasClass(e.elm,"mce-item-selected")||e==E)}function f(){var e=[];return i(a.rows,function(t){i(t.cells,function(n){return F.hasClass(n,"mce-item-selected")||E&&n==E.elm?(e.push(t),!1):void 0})}),e}function m(){var e=F.createRng();e.setStartAfter(a),e.setEndAfter(a),L.setRng(e),F.remove(a)}function p(t){var o,a={};return r.settings.table_clone_elements!==!1&&(a=e.makeMap((r.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var r;return 3==e.nodeType?(i(F.getParents(e.parentNode,null,t).reverse(),function(e){a[e.nodeName]&&(e=s(e,!1),o?r&&r.appendChild(e):o=r=e,r=e)}),r&&(r.innerHTML=n.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),t=s(t,!1),d(t,"rowSpan",1),d(t,"colSpan",1),o?t.appendChild(o):(!n.ie||n.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function g(){var e=F.createRng(),t;return i(F.select("tr",a),function(e){0===e.cells.length&&F.remove(e)}),0===F.select("tr",a).length?(e.setStartBefore(a),e.setEndBefore(a),L.setRng(e),void F.remove(a)):(i(F.select("thead,tbody,tfoot",a),function(e){0===e.rows.length&&F.remove(e)}),l(),void(B&&(t=M[Math.min(M.length-1,B.y)],t&&(L.select(t[Math.min(t.length-1,B.x)].elm,!0),L.collapse(!0)))))}function b(e,t,n,o){var i,r,a,l,s;for(i=M[t][e].elm.parentNode,a=1;n>=a;a++)if(i=F.getNext(i,"tr")){for(r=e;r>=0;r--)if(s=M[t+a][r].elm,s.parentNode==i){for(l=1;o>=l;l++)F.insertAfter(p(s),s);break}if(-1==r)for(l=1;o>=l;l++)i.insertBefore(p(i.cells[0]),i.cells[0])}}function h(){i(M,function(e,t){i(e,function(e,n){var i,r,a;if(u(e)&&(e=e.elm,i=o(e,"colspan"),r=o(e,"rowspan"),i>1||r>1)){for(d(e,"rowSpan",1),d(e,"colSpan",1),a=0;i-1>a;a++)F.insertAfter(p(e),e);b(n,t,r-1,i)}})})}function v(t,n,o){var r,a,s,f,m,p,b,v,y,x,w;if(t?(r=k(t),a=r.x,s=r.y,f=a+(n-1),m=s+(o-1)):(B=I=null,i(M,function(e,t){i(e,function(e,n){u(e)&&(B||(B={x:n,y:t}),I={x:n,y:t})})}),B&&(a=B.x,s=B.y,f=I.x,m=I.y)),v=c(a,s),y=c(f,m),v&&y&&v.part==y.part){for(h(),l(),v=c(a,s).elm,d(v,"colSpan",f-a+1),d(v,"rowSpan",m-s+1),b=s;m>=b;b++)for(p=a;f>=p;p++)M[b]&&M[b][p]&&(t=M[b][p].elm,t!=v&&(x=e.grep(t.childNodes),i(x,function(e){v.appendChild(e)}),x.length&&(x=e.grep(v.childNodes),w=0,i(x,function(e){"BR"==e.nodeName&&F.getAttrib(e,"data-mce-bogus")&&w++<x.length-1&&v.removeChild(e)})),F.remove(t)));g()}}function y(e){var n,r,a,l,c,f,m,g,b;if(i(M,function(t,o){return i(t,function(t){return u(t)&&(t=t.elm,c=t.parentNode,f=s(c,!1),n=o,e)?!1:void 0}),e?!n:void 0}),n!==t){for(l=0;l<M[0].length;l++)if(M[n][l]&&(r=M[n][l].elm,r!=a)){if(e){if(n>0&&M[n-1][l]&&(g=M[n-1][l].elm,b=o(g,"rowSpan"),b>1)){d(g,"rowSpan",b+1);continue}}else if(b=o(r,"rowspan"),b>1){d(r,"rowSpan",b+1);continue}m=p(r),d(m,"colSpan",r.colSpan),f.appendChild(m),a=r}f.hasChildNodes()&&(e?c.parentNode.insertBefore(f,c):F.insertAfter(f,c))}}function x(e){var t,n;i(M,function(n){return i(n,function(n,o){return u(n)&&(t=o,e)?!1:void 0}),e?!t:void 0}),i(M,function(i,r){var a,l,s;i[t]&&(a=i[t].elm,a!=n&&(s=o(a,"colspan"),l=o(a,"rowspan"),1==s?e?(a.parentNode.insertBefore(p(a),a),b(t,r,l-1,s)):(F.insertAfter(p(a),a),b(t,r,l-1,s)):d(a,"colSpan",a.colSpan+1),n=a))})}function w(){var t=[];i(M,function(n){i(n,function(n,r){u(n)&&-1===e.inArray(t,r)&&(i(M,function(e){var t=e[r].elm,n;n=o(t,"colSpan"),n>1?d(t,"colSpan",n-1):F.remove(t)}),t.push(r))})}),g()}function C(){function e(e){var t,n;i(e.cells,function(e){var n=o(e,"rowSpan");n>1&&(d(e,"rowSpan",n-1),t=k(e),b(t.x,t.y,1,1))}),t=k(e.cells[0]),i(M[t.y],function(e){var t;e=e.elm,e!=n&&(t=o(e,"rowSpan"),1>=t?F.remove(e):d(e,"rowSpan",t-1),n=e)})}var t;t=f(),i(t.reverse(),function(t){e(t)}),g()}function P(){var e=f();return F.remove(e),g(),e}function S(){var e=f();return i(e,function(t,n){e[n]=s(t,!0)}),e}function R(e,t){var n=f(),o=n[t?0:n.length-1],r=o.cells.length;e&&(i(M,function(e){var t;return r=0,i(e,function(e){e.real&&(r+=e.colspan),e.elm.parentNode==o&&(t=1)}),t?!1:void 0}),t||e.reverse(),i(e,function(e){var n,i=e.cells.length,a;for(n=0;i>n;n++)a=e.cells[n],d(a,"colSpan",1),d(a,"rowSpan",1);for(n=i;r>n;n++)e.appendChild(p(e.cells[i-1]));for(n=r;i>n;n++)F.remove(e.cells[n]);t?o.parentNode.insertBefore(e,o):F.insertAfter(e,o)}),F.removeClass(F.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function k(e){var t;return i(M,function(n,o){return i(n,function(n,i){return n.elm==e?(t={x:i,y:o},!1):void 0}),!t}),t}function T(e){B=k(e)}function _(){var e,t;return e=t=0,i(M,function(n,o){i(n,function(n,i){var r,a;u(n)&&(n=M[o][i],i>e&&(e=i),o>t&&(t=o),n.real&&(r=n.colspan-1,a=n.rowspan-1,r&&i+r>e&&(e=i+r),a&&o+a>t&&(t=o+a)))})}),{x:e,y:t}}function N(e){var t,n,o,i,r,a,l,s,c,d;if(I=k(e),B&&I){for(t=Math.min(B.x,I.x),n=Math.min(B.y,I.y),o=Math.max(B.x,I.x),i=Math.max(B.y,I.y),r=o,a=i,d=n;a>=d;d++)e=M[d][t],e.real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(c=t;r>=c;c++)e=M[n][c],e.real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(d=n;i>=d;d++)for(c=t;o>=c;c++)e=M[d][c],e.real&&(l=e.colspan-1,s=e.rowspan-1,l&&c+l>r&&(r=c+l),s&&d+s>a&&(a=d+s));for(F.removeClass(F.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=n;a>=d;d++)for(c=t;r>=c;c++)M[d][c]&&F.addClass(M[d][c].elm,"mce-item-selected")}}function A(e,t){var n,o,i;n=k(e),o=n.y*D+n.x;do{if(o+=t,i=c(o%D,Math.floor(o/D)),!i)break;if(i.elm!=e)return L.select(i.elm,!0),F.isEmpty(i.elm)&&L.collapse(!0),!0}while(i.elm==e);return!1}var M,D,B,I,E,L=r.selection,F=L.dom;a=a||F.getParent(L.getStart(),"table"),l(),E=F.getParent(L.getStart(),"th,td"),E&&(B=k(E),I=_(),E=c(B.x,B.y)),e.extend(this,{deleteTable:m,split:h,merge:v,insertRow:y,insertCol:x,deleteCols:w,deleteRows:C,cutRows:P,copyRows:S,pasteRows:R,getPos:k,setStartCell:T,setEndCell:N,moveRelIdx:A,refresh:l})}}),o(u,[f,d,c],function(e,t,n){function o(e,t){return parseInt(e.getAttribute(t)||1,10)}var i=n.each;return function(n){function r(){function t(t){function r(e,o){var i=e?"previousSibling":"nextSibling",r=n.dom.getParent(o,"tr"),l=r[i];if(l)return b(n,o,l,e),t.preventDefault(),!0;var d=n.dom.getParent(r,"table"),u=r.parentNode,f=u.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var m=a(e,d,u,"tbody");if(null!==m)return s(e,m,o)}return c(e,r,i,d)}function a(e,t,o,i){var r=n.dom.select(">"+i,t),a=r.indexOf(o);if(e&&0===a||!e&&a===r.length-1)return l(e,t);if(-1===a){var s="thead"===o.tagName.toLowerCase()?0:r.length-1;return r[s]}return r[a+(e?-1:1)]}function l(e,t){var o=e?"thead":"tfoot",i=n.dom.select(">"+o,t);return 0!==i.length?i[0]:null}function s(e,o,i){var r=d(o,e);return r&&b(n,i,r,e),t.preventDefault(),!0}function c(e,o,i,a){var l=a[i];if(l)return u(l),!0;var s=n.dom.getParent(a,"td,th");if(s)return r(e,s,t);var c=d(o,!e);return u(c),t.preventDefault(),!1}function d(e,t){var o=e&&e[t?"lastChild":"firstChild"];return o&&"BR"===o.nodeName?n.dom.getParent(o,"td,th"):o}function u(e){n.selection.setCursorLocation(e,0)}function f(){return y==e.UP||y==e.DOWN}function m(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function p(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=o(n,"colspan");return t}function g(e,t){var n=0,r=0;return i(e.children,function(e,i){return n+=o(e,"colspan"),r=i,n>t?!1:void 0}),r}function b(e,t,o,i){var r=p(n.dom.getParent(t,"td,th")),a=g(o,r),l=o.childNodes[a],s=d(l,i);u(s||l)}function h(e){var t=n.selection.getNode(),o=n.dom.getParent(t,"td,th"),i=n.dom.getParent(e,"td,th");return o&&o!==i&&v(o,i)}function v(e,t){return n.dom.getParent(e,"TABLE")===n.dom.getParent(t,"TABLE")}var y=t.keyCode;if(f()&&m(n)){var x=n.selection.getNode();setTimeout(function(){h(x)&&r(!t.shiftKey&&y===e.UP,x,t)},0)}}n.on("KeyDown",function(e){t(e)})}function a(){function e(e,t){var n=t.ownerDocument,o=n.createRange(),i;return o.setStartBefore(t),o.setEnd(e.endContainer,e.endOffset),i=n.createElement("body"),i.appendChild(o.cloneContents()),0===i.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}n.on("KeyDown",function(t){var o,i,r=n.dom;(37==t.keyCode||38==t.keyCode)&&(o=n.selection.getRng(),i=r.getParent(o.startContainer,"table"),i&&n.getBody().firstChild==i&&e(o,i)&&(o=r.createRng(),o.setStartBefore(i),o.setEndBefore(i),n.selection.setRng(o),t.preventDefault()))})}function l(){n.on("KeyDown SetContent VisualAid",function(){var e;for(e=n.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(n.settings.forced_root_block?n.dom.add(n.getBody(),n.settings.forced_root_block,n.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):n.dom.add(n.getBody(),"br",{"data-mce-bogus":"1"}))}),n.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\xa0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&n.dom.remove(t)})}function s(){function e(e,t,n,o){var i=3,r=e.dom.getParent(t.startContainer,"TABLE"),a,l,s;return r&&(a=r.parentNode),l=t.startContainer.nodeType==i&&0===t.startOffset&&0===t.endOffset&&o&&("TR"==n.nodeName||n==a),s=("TD"==n.nodeName||"TH"==n.nodeName)&&!o,l||s}function t(){var t=n.selection.getRng(),o=n.selection.getNode(),i=n.dom.getParent(t.startContainer,"TD,TH");if(e(n,t,o,i)){i||(i=o);for(var r=i.lastChild;r.lastChild;)r=r.lastChild;3==r.nodeType&&(t.setEnd(r,r.data.length),n.selection.setRng(t))}}n.on("KeyDown",function(){t()}),n.on("MouseDown",function(e){2!=e.button&&t()})}function c(){n.on("keydown",function(t){if((t.keyCode==e.DELETE||t.keyCode==e.BACKSPACE)&&!t.isDefaultPrevented()){var o=n.dom.getParent(n.selection.getStart(),"table");if(o){for(var i=n.dom.select("td,th",o),r=i.length;r--;)if(!n.dom.hasClass(i[r],"mce-item-selected"))return;t.preventDefault(),n.execCommand("mceTableDelete")}}})}c(),t.webkit&&(r(),s()),t.gecko&&(a(),l()),t.ie>10&&(a(),l())}}),o(m,[s,p,c],function(e,t,n){return function(o){function i(e){o.getBody().style.webkitUserSelect="",(e||d)&&(o.dom.removeClass(o.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=!1)}function r(t){var n,i,r=t.target;if(!u&&s&&(l||r!=s)&&("TD"==r.nodeName||"TH"==r.nodeName)){i=a.getParent(r,"table"),i==c&&(l||(l=new e(o,i),l.setStartCell(s),o.getBody().style.webkitUserSelect="none"),l.setEndCell(r),d=!0),n=o.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(f){}t.preventDefault()}}var a=o.dom,l,s,c,d=!0,u;return o.on("MouseDown",function(e){2==e.button||u||(i(),s=a.getParent(e.target,"td,th"),c=a.getParent(s,"table"))}),o.on("mouseover",r),o.on("remove",function(){a.unbind(o.getDoc(),"mouseover",r)}),o.on("MouseUp",function(){function e(e,o){var r=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(o?i.setStart(e,0):i.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(o?i.setStartBefore(e):i.setEndBefore(e))}while(e=o?r.next():r.prev())}var i,r=o.selection,d,u,f,m;if(s){if(l&&(o.getBody().style.webkitUserSelect=""),d=a.select("td.mce-item-selected,th.mce-item-selected"),d.length>0){i=a.createRng(),f=d[0],i.setStartBefore(f),i.setEndAfter(f),e(f,1),u=new t(f,a.getParent(d[0],"table"));do if("TD"==f.nodeName||"TH"==f.nodeName){if(!a.hasClass(f,"mce-item-selected"))break;m=f}while(f=u.next());e(m),r.setRng(i)}o.nodeChanged(),s=l=c=null}}),o.on("KeyUp Drop SetContent",function(e){i("setcontent"==e.type),s=l=c=null,u=!1}),o.on("ObjectResizeStart ObjectResized",function(e){u="objectresized"!=e.type}),{clear:i}}}),o(g,[c,d],function(e,t){var n=e.each;return function(o){function i(){var e=this,t=o.settings.color_picker_callback;t&&t.call(o,function(t){e.value(t).fire("change")},e.value())}function r(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:i},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i}]}]}}function a(e){return e?e.replace(/px$/,""):""}function l(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function s(e){n("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function c(e){n("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}function d(t,n,o){function i(t,o){return o=o||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=i(e.menu):(t.value=e.value,n&&n(t)),o.push(t)}),o}return i(t,o||[])}function u(e,t,n){var o=t.toJSON(),i=e.parseStyle(o.style);n?(t.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change")):(i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}function f(e,t,n){var o=e.parseStyle(e.getAttrib(n,"style"));o["border-color"]&&(t.borderColor=o["border-color"]),o["background-color"]&&(t.backgroundColor=o["background-color"]),t.style=e.serializeStyle(o)}var m=this;m.tableProps=function(){m.table(!0)},m.table=function(i){function c(){var n;u(m,this),v=e.extend(v,this.toJSON()),e.each("backgroundColor borderColor".split(" "),function(e){delete v[e]}),v["class"]===!1&&delete v["class"],o.undoManager.transact(function(){p||(p=o.plugins.table.insertTable(v.cols||1,v.rows||1)),o.dom.setAttribs(p,{cellspacing:v.cellspacing,cellpadding:v.cellpadding,border:v.border,style:v.style,"class":v["class"]}),o.dom.setStyles(p,{width:l(v.width),height:l(v.height)}),n=m.select("caption",p)[0],n&&!v.caption&&m.remove(n),!n&&v.caption&&(n=m.create("caption"),n.innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',p.insertBefore(n,p.firstChild)),s(p),v.align&&o.formatter.apply("align"+v.align,{},p),o.focus(),o.addVisual()})}var m=o.dom,p,g,b,h,v={},y;i===!0?(p=m.getParent(o.selection.getStart(),"table"),p&&(v={width:a(m.getStyle(p,"width")||m.getAttrib(p,"width")),height:a(m.getStyle(p,"height")||m.getAttrib(p,"height")),cellspacing:p?m.getAttrib(p,"cellspacing"):"",cellpadding:p?m.getAttrib(p,"cellpadding"):"",border:p?m.getAttrib(p,"border"):"",caption:!!m.select("caption",p)[0],"class":m.getAttrib(p,"class")},n("left center right".split(" "),function(e){o.formatter.matchNode(p,"align"+e)&&(v.align=e)}))):(g={label:"Cols",name:"cols"},b={label:"Rows",name:"rows"}),o.settings.table_class_list&&(v["class"]&&(v["class"]=v["class"].replace(/\s*mce\-item\-table\s*/g,"")),h={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[g,b,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},h]},o.settings.table_adv_tab!==!1?(f(m,v,p),o.windowManager.open({title:"Table properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},r(m)],onsubmit:c})):o.windowManager.open({title:"Table properties",data:v,body:y,onsubmit:c})},m.merge=function(e,t){o.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();o.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},m.cell=function(){function t(){u(i,this),p=e.extend(p,this.toJSON()),o.undoManager.transact(function(){n(b,function(e){o.dom.setAttribs(e,{scope:p.scope,style:p.style,"class":p["class"]}),o.dom.setStyles(e,{width:l(p.width),height:l(p.height)}),p.type&&e.nodeName.toLowerCase()!=p.type&&(e=i.rename(e,p.type)),s(e),p.align&&o.formatter.apply("align"+p.align,{},e),c(e),p.valign&&o.formatter.apply("valign"+p.valign,{},e)}),o.focus()})}var i=o.dom,m,p,g,b=[];if(b=o.dom.select("td.mce-item-selected,th.mce-item-selected"),m=o.dom.getParent(o.selection.getStart(),"td,th"),!b.length&&m&&b.push(m),m=m||b[0]){p={width:a(i.getStyle(m,"width")||i.getAttrib(m,"width")),height:a(i.getStyle(m,"height")||i.getAttrib(m,"height")),scope:i.getAttrib(m,"scope"),"class":i.getAttrib(m,"class")},p.type=m.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(p.align=e)}),n("top middle bottom".split(" "),function(e){o.formatter.matchNode(m,"valign"+e)&&(p.valign=e)}),o.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};o.settings.table_cell_adv_tab!==!1?(f(i,p,m),o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:p,body:[{title:"General",type:"form",items:h},r(i)],onsubmit:t})):o.windowManager.open({title:"Cell properties",data:p,items:h,onsubmit:t})}},m.row=function(){function t(){var t,r,a;u(i,this),b=e.extend(b,this.toJSON()),o.undoManager.transact(function(){var e=b.type;n(h,function(n){o.dom.setAttribs(n,{scope:b.scope,style:b.style,"class":b["class"]}),o.dom.setStyles(n,{height:l(b.height)}),e!=n.parentNode.nodeName.toLowerCase()&&(t=i.getParent(n,"table"),r=n.parentNode,a=i.select(e,t)[0],a||(a=i.create(e),t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)),a.appendChild(n),r.hasChildNodes()||i.remove(r)),s(n),b.align&&o.formatter.apply("align"+b.align,{},n)}),o.focus()})}var i=o.dom,c,m,p,g,b,h=[],v;c=o.dom.getParent(o.selection.getStart(),"table"),m=o.dom.getParent(o.selection.getStart(),"td,th"),n(c.rows,function(e){n(e.cells,function(t){return i.hasClass(t,"mce-item-selected")||t==m?(h.push(e),!1):void 0})}),p=h[0],p&&(b={height:a(i.getStyle(p,"height")||i.getAttrib(p,"height")),scope:i.getAttrib(p,"scope"),"class":i.getAttrib(p,"class")},b.type=p.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(p,"align"+e)&&(b.align=e)}),o.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),v={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},o.settings.table_row_adv_tab!==!1?(f(i,b,p),o.windowManager.open({title:"Row properties",data:b,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},r(i)],onsubmit:t})):o.windowManager.open({title:"Row properties",data:b,body:v,onsubmit:t}))}}}),o(b,[s,u,m,g,c,p,d,h],function(e,t,n,o,i,r,a,l){function s(i){function r(e){return function(){i.execCommand(e)}}function l(e,t){var n,o,r,l;for(r='<table id="__mce"><tbody>',n=0;t>n;n++){for(r+="<tr>",o=0;e>o;o++)r+="<td>"+(a.ie?" ":"<br>")+"</td>";r+="</tr>"}return r+="</tbody></table>",i.undoManager.transact(function(){i.insertContent(r),l=i.dom.get("__mce"),i.dom.setAttrib(l,"id",null),i.dom.setAttribs(l,i.settings.table_default_attributes||{}),i.dom.setStyles(l,i.settings.table_default_styles||{})}),l}function s(e,t){function n(){e.disabled(!i.dom.getParent(i.selection.getStart(),t)),i.selection.selectorChanged(t,function(t){e.disabled(!t)})}i.initialized?n():i.on("init",n)}function d(){s(this,"table")}function u(){s(this,"td,th")}function f(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function m(e,t,n){var o=n.getEl().getElementsByTagName("table")[0],r,a,l,s,c,d=n.isRtl()||"tl-tr"==n.parent().rel;for(o.nextSibling.innerHTML=e+1+" x "+(t+1),d&&(e=9-e),a=0;10>a;a++)for(r=0;10>r;r++)s=o.rows[a].childNodes[r].firstChild,c=(d?r>=e:e>=r)&&t>=a,i.dom.toggleClass(s,"mce-active",c),c&&(l=s);return l.parentNode}var p,g=this,b=new o(i);i.settings.table_grid===!1?i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:b.table}):i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),b.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(e,"mce-active"),i.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:f(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t=e.target,n,o;"A"==t.tagName.toUpperCase()&&(n=parseInt(t.getAttribute("data-mce-x"),10),o=parseInt(t.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(n=9-n),(n!==this.lastX||o!==this.lastY)&&(m(n,o,e.control),this.lastX=n,this.lastY=o))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),i.undoManager.transact(function(){l(t.lastX+1,t.lastY+1)}),i.addVisual())}}]}),i.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:b.tableProps}),i.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),i.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:r("mceTableCellProps"),onPostRender:u},{text:"Merge cells",onclick:r("mceTableMergeCells"),onPostRender:u},{text:"Split cell",onclick:r("mceTableSplitCells"),onPostRender:u}]}),i.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:r("mceTableInsertRowBefore"),onPostRender:u},{text:"Insert row after",onclick:r("mceTableInsertRowAfter"),onPostRender:u},{text:"Delete row",onclick:r("mceTableDeleteRow"),onPostRender:u},{text:"Row properties",onclick:r("mceTableRowProps"),onPostRender:u},{text:"-"},{text:"Cut row",onclick:r("mceTableCutRow"),onPostRender:u},{text:"Copy row",onclick:r("mceTableCopyRow"),onPostRender:u},{text:"Paste row before",onclick:r("mceTablePasteRowBefore"),onPostRender:u},{text:"Paste row after",onclick:r("mceTablePasteRowAfter"),onPostRender:u}]}),i.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:r("mceTableInsertColBefore"),onPostRender:u},{text:"Insert column after",onclick:r("mceTableInsertColAfter"),onPostRender:u},{text:"Delete column",onclick:r("mceTableDeleteCol"),onPostRender:u}]});var h=[];c("inserttable tableprops deletetable | cell row column".split(" "),function(e){h.push("|"==e?{text:"-"}:i.menuItems[e])}),i.addButton("table",{type:"menubutton",title:"Table",menu:h}),a.isIE||i.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(i.selection.select(e),i.nodeChanged())}),g.quirks=new t(i),i.on("Init",function(){g.cellSelection=new n(i)}),c({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=i.dom.getParent(i.selection.getStart(),"th,td"),i.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():b.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){p=e.cutRows()},mceTableCopyRow:function(e){p=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(p,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(p)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){i.addCommand(n,function(){var n=new e(i);n&&(t(n),i.execCommand("mceRepaint"),g.cellSelection.clear())})}),c({mceInsertTable:b.table,mceTableProps:function(){b.table(!0)},mceTableRowProps:b.row,mceTableCellProps:b.cell},function(e,t){i.addCommand(t,function(t,n){e(n)})}),i.settings.table_tab_navigation!==!1&&i.on("keydown",function(t){var n,o,r;9==t.keyCode&&(n=i.dom.getParent(i.selection.getStart(),"th,td"),n&&(t.preventDefault(),o=new e(i),r=t.shiftKey?-1:1,i.undoManager.transact(function(){!o.moveRelIdx(n,r)&&r>0&&(o.insertRow(),o.refresh(),o.moveRelIdx(n,r))})))}),g.insertTable=l}var c=i.each;l.add("table",s)}),a([])}(this);